{"version":3,"sources":["webpack:////Users/peng/Desktop/HX/SteyIoT/main.js","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?74d5","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4e3c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4d02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?8c02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?bd46","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4aef"],"names":["createPage","Page","data","statusBarHeight","navigationBarHeight","bottomArea","loginTip","gridColumn","roomNameValues","currentRoomValue","roomZones","isWebSocketOpen","components","DeviceItem","onLoad","getApp","globalData","uni","$on","requestAccessibleSpaces","isLogin","onSocketOpen","console","log","token","getStorageSync","Date","now","sendSocketMessage","JSON","stringify","onSocketError","onSocketMessage","res","handleSocketMeesage","onSocketClose","code","connectSocket","onShow","onHide","closeSocket","computed","methods","loginButtonClick","navigateTo","url","tapCurrentRoom","event","detail","requestIoTTemplate","request","method","header","success","statusCode","handleAccessibleSpaces","logout","error","showToast","icon","title","duration","fail","spaces","map","obj","SpaceModel","length","spaceId","space","text","roomName","value","showLoading","mask","handleTemplate","zones","complete","hideLoading","zone","RoomZoneModel","filter","item","isSystemZone","parse","socketModel","SocketModel","forEach","deviceModel","devices","device","zoneDeviceId","controlModel","controls","control","zoneDeviceControlId","deviceItemClick","vibrateShort","socketObj","timestamp"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=483fb224&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=483fb224&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport SpaceModel from './js/space-model.js'\nimport RoomZoneModel from './js/room-zone.js'\nimport SocketModel from './js/socket-model.js'\nimport DeviceItem from './components/device-item.vue'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: '0px',\n\t\t\tnavigationBarHeight: '0px',\n\t\t\tbottomArea: '6px',\n\t\t\tloginTip: '当前未登录',\n\t\t\tgridColumn: 2,\n\t\t\troomNameValues: [],\n\t\t\tcurrentRoomValue: null,\n\t\t\troomZones: [],\n\t\t\tisWebSocketOpen: false\n\t\t}\n\t},\n\tcomponents: {\n\t\tDeviceItem\n\t},\n\tonLoad() {\n\t\t// 计算\n\t\tthis.statusBarHeight = `${getApp().globalData.statusBarHeight}px`\n\t\tthis.navigationBarHeight = `${getApp().globalData.navigationBarHeight}px`\n\t\tlet bottomArea = getApp().globalData.bottomArea > 0 ? getApp().globalData.bottomArea : 6\n\t\tthis.bottomArea = `${bottomArea}px`\n\t\t// 接收全局登录事件\n\t\tuni.$on('haveLogin', () => {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t})\n\t\t// 获取房间\n\t\tif (this.isLogin) {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t}\n\t\t// websocket 回调\n\t\tuni.onSocketOpen(() => {\n\t\t\tthis.isWebSocketOpen = true\n\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t// 向服务器发送token\n\t\t\tlet data = {\n\t\t\t\t'data': {\n\t\t\t\t\ttoken: uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\t'timestamp': Date.now()\n\t\t\t}\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata: JSON.stringify(data)\n\t\t\t})\n\t\t})\n\t\tuni.onSocketError(function(){\n\t\t\tconsole.log('WebSocket连接打开失败！');\n\t\t})\n\t\tuni.onSocketMessage((res) => {\n\t\t\tthis.handleSocketMeesage(res.data)\n\t\t})\n\t\tuni.onSocketClose((res) => {\n\t\t\tthis.isWebSocketOpen = false\n\t\t  console.log('WebSocket 已关闭！', res);\n\t\t\tif (res.code === 1006) {\n\t\t\t\t// 自动断 重新连\n\t\t\t\tthis.connectSocket()\n\t\t\t}\n\t\t})\n\t},\n\tonShow() {\n\t\tif (this.isLogin && this.currentRoomValue) {\n\t\t\tthis.connectSocket()\n\t\t}\n\t},\n\tonHide() {\n\t\tuni.closeSocket()\n\t},\n\tcomputed: {\n\t\t...mapState(['isLogin'])\n\t},\n\tmethods: {\n\t\t...mapMutations(['logout']),\n\t\tloginButtonClick() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'../login/login'\n\t\t\t})\n\t\t},\n\t\ttapCurrentRoom(event) {\n\t\t\tthis.currentRoomValue = event.detail\n\t\t\tthis.requestIoTTemplate()\n\t\t},\n\t\trequestAccessibleSpaces() {\n\t\t\t// 请求spaces信息\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/app/iot/accessible-spaces',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\tthis.handleAccessibleSpaces(res.data.data)\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thandleAccessibleSpaces(data) {\n\t\t\tconst spaces = data.map((obj) => new SpaceModel(obj))\n\t\t\tif (spaces.length > 0) {\n\t\t\t\tthis.currentRoomValue = spaces[0].spaceId\n\t\t\t\tthis.roomNameValues = spaces.map((space) => {\n\t\t\t\t\tconst obj = {text: space.roomName, value: space.spaceId}\n\t\t\t\t\treturn obj\n\t\t\t\t})\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t} else {\n\t\t\t\tthis.currentRoomValue = 138\n\t\t\t\tthis.roomNameValues = [\n\t\t\t\t\t{text: '520', value: 138},\n\t\t\t\t\t{text: '521', value: 142}\n\t\t\t\t]\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t}\n\t\t},\n\t\trequestIoTTemplate() {\n\t\t\tif (this.currentRoomValue) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `https://gateway.stey.com/iot-service/staff-app/iot/template/${this.currentRoomValue}`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.handleTemplate(res.data.data.zones)\n\t\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleTemplate(zones) {\n\t\t\t// 筛选非系统的zone\n\t\t\tconst roomZones = zones.map((zone) => new RoomZoneModel(zone)).filter((item) => !item.isSystemZone)\n\t\t\tthis.roomZones = roomZones\n\t\t\t//打开websocket\n\t\t\tthis.connectSocket()\n\t\t},\n\t\tconnectSocket() {\n\t\t\tif (this.isWebSocketOpen) {\n\t\t\t\tuni.closeSocket()\n\t\t\t}\n\t\t\tuni.connectSocket({\n\t\t\t\turl: `wss://gateway.stey.com/iot-service/app/iot/connect/${this.currentRoomValue}`,\n\t\t\t})\n\t\t},\n\t\thandleSocketMeesage(data) {\n\t\t\tconst obj = JSON.parse(data)\n\t\t\tconst socketModel = new SocketModel(obj)\n\t\t\tthis.roomZones.forEach((zone) => {\n\t\t\t\tconst deviceModel = zone.devices.filter((device) => device.zoneDeviceId === socketModel.zoneDeviceId)[0]\n\t\t\t\tif (deviceModel) {\n\t\t\t\t\tconst controlModel = deviceModel.controls.filter((control) => control.zoneDeviceControlId === socketModel.zoneDeviceControlId)[0]\n\t\t\t\t\tif (controlModel) {\n\t\t\t\t\t\tcontrolModel.value = socketModel.value\n\t\t\t\t\t\tconsole.log(socketModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeviceItemClick(obj) {\n\t\t\t// 震动\n\t\t\tuni.vibrateShort()\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '发送中',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\tlet socketObj = {\n\t\t\t\t'spaceId': this.currentRoomValue,\n\t\t\t\t...obj\n\t\t\t}\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/staff-app/iot/run-command',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tdata: socketObj,\n\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590471215535\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
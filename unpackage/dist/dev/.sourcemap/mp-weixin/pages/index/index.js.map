{"version":3,"sources":["webpack:////Users/peng/Desktop/HX/SteyIoT/main.js","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?74d5","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4e3c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4d02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?8c02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?bd46","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4aef"],"names":["createPage","Page","data","statusBarHeight","navigationBarHeight","bottomArea","loginTip","gridColumn","roomNameValues","currentRoomValue","roomZones","components","DeviceItem","onLoad","getApp","globalData","uni","onSocketOpen","console","log","token","getStorageSync","Date","now","sendSocketMessage","JSON","stringify","onSocketError","onSocketMessage","res","handleSocketMeesage","onSocketClose","onShow","isLogin","requestAccessibleSpaces","onHide","closeSocket","computed","methods","loginButtonClick","navigateTo","url","tapCurrentRoom","event","detail","requestIoTTemplate","request","method","header","success","statusCode","handleAccessibleSpaces","logout","error","showToast","icon","title","duration","fail","spaces","map","obj","SpaceModel","length","spaceId","space","text","roomName","value","showLoading","mask","handleTemplate","zones","complete","hideLoading","zone","RoomZoneModel","filter","item","isSystemZone","connectSocket","parse","socketModel","SocketModel","forEach","deviceModel","devices","device","zoneDeviceId","controlModel","controls","control","zoneDeviceControlId","deviceItemClick","socketObj","timestamp"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=483fb224&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=483fb224&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport SpaceModel from './js/space-model.js'\nimport RoomZoneModel from './js/room-zone.js'\nimport SocketModel from './js/socket-model.js'\nimport DeviceItem from './components/device-item.vue'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: '0px',\n\t\t\tnavigationBarHeight: '0px',\n\t\t\tbottomArea: '6px',\n\t\t\tloginTip: '当前未登录',\n\t\t\tgridColumn: 2,\n\t\t\troomNameValues: [],\n\t\t\tcurrentRoomValue: null,\n\t\t\troomZones: []\n\t\t}\n\t},\n\tcomponents: {\n\t\tDeviceItem\n\t},\n\tonLoad() {\n\t\tthis.statusBarHeight = `${getApp().globalData.statusBarHeight}px`\n\t\tthis.navigationBarHeight = `${getApp().globalData.navigationBarHeight}px`\n\t\tlet bottomArea = getApp().globalData.bottomArea > 0 ? getApp().globalData.bottomArea : 6\n\t\tthis.bottomArea = `${bottomArea}px`\n\t\t// websocket 回调\n\t\tuni.onSocketOpen(function(){\n\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t// 向服务器发送token\n\t\t\tlet data = {\n\t\t\t\t'data': {\n\t\t\t\t\ttoken: uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\t'timestamp': Date.now()\n\t\t\t}\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata: JSON.stringify(data)\n\t\t\t})\n\t\t})\n\t\tuni.onSocketError(function(){\n\t\t\tconsole.log('WebSocket连接打开失败！');\n\t\t})\n\t\tuni.onSocketMessage((res) => {\n\t\t\tthis.handleSocketMeesage(res.data)\n\t\t})\n\t\tuni.onSocketClose(function (res) {\n\t\t  console.log('WebSocket 已关闭！');\n\t\t})\n\t},\n\tonShow() {\n\t\tif (this.isLogin) {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t}\n\t},\n\tonHide() {\n\t\tuni.closeSocket()\n\t},\n\tcomputed: {\n\t\t...mapState(['isLogin'])\n\t},\n\tmethods: {\n\t\t...mapMutations(['logout']),\n\t\tloginButtonClick() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'../login/login'\n\t\t\t})\n\t\t},\n\t\ttapCurrentRoom(event) {\n\t\t\tthis.currentRoomValue = event.detail\n\t\t\tthis.requestIoTTemplate()\n\t\t},\n\t\trequestAccessibleSpaces() {\n\t\t\t// 请求spaces信息\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/app/iot/accessible-spaces',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\tthis.handleAccessibleSpaces(res.data.data)\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thandleAccessibleSpaces(data) {\n\t\t\tconst spaces = data.map((obj) => new SpaceModel(obj))\n\t\t\tif (spaces.length > 0) {\n\t\t\t\tthis.currentRoomValue = spaces[0].spaceId\n\t\t\t\tthis.roomNameValues = spaces.map((space) => {\n\t\t\t\t\tconst obj = {text: space.roomName, value: space.spaceId}\n\t\t\t\t\treturn obj\n\t\t\t\t})\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t} else {\n\t\t\t\tthis.currentRoomValue = 138\n\t\t\t\tthis.roomNameValues = [\n\t\t\t\t\t{text: '520', value: 138},\n\t\t\t\t\t{text: '521', value: 142}\n\t\t\t\t]\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t}\n\t\t},\n\t\trequestIoTTemplate() {\n\t\t\tif (this.currentRoomValue) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `https://gateway.stey.com/iot-service/staff-app/iot/template/${this.currentRoomValue}`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.handleTemplate(res.data.data.zones)\n\t\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleTemplate(zones) {\n\t\t\tconsole.log(zones)\n\t\t\t// 筛选非系统的zone\n\t\t\tconst roomZones = zones.map((zone) => new RoomZoneModel(zone)).filter((item) => !item.isSystemZone)\n\t\t\tthis.roomZones = roomZones\n\t\t\tconsole.log(roomZones)\n\t\t\t//打开websocket\n\t\t\tthis.connectSocket()\n\t\t},\n\t\tconnectSocket() {\n\t\t\tuni.connectSocket({\n\t\t\t\turl: `wss://gateway.stey.com/iot-service/app/iot/connect/${this.currentRoomValue}`,\n\t\t\t})\n\t\t},\n\t\thandleSocketMeesage(data) {\n\t\t\tconst obj = JSON.parse(data)\n\t\t\tconst socketModel = new SocketModel(obj)\n\t\t\tthis.roomZones.forEach((zone) => {\n\t\t\t\tconst deviceModel = zone.devices.filter((device) => device.zoneDeviceId === socketModel.zoneDeviceId)[0]\n\t\t\t\tif (deviceModel) {\n\t\t\t\t\tconst controlModel = deviceModel.controls.filter((control) => control.zoneDeviceControlId === socketModel.zoneDeviceControlId)[0]\n\t\t\t\t\tif (controlModel) {\n\t\t\t\t\t\tcontrolModel.value = socketModel.value\n\t\t\t\t\t\tconsole.log(socketModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeviceItemClick(obj) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '发送中',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\tlet socketObj = {\n\t\t\t\t'spaceId': this.currentRoomValue,\n\t\t\t\t...obj\n\t\t\t}\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/staff-app/iot/run-command',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tdata: socketObj,\n\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590403267991\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
{"version":3,"sources":["webpack:////Users/peng/Desktop/HX/SteyIoT/main.js","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?74d5","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4e3c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4d02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?8c02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?bd46","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4aef"],"names":["createPage","Page","data","statusBarHeight","navigationBarHeight","bottomArea","loginTip","gridColumn","roomNameValues","currentRoomValue","roomZones","isWebSocketOpen","isRequestSpacesDone","currentDeviceDataModel","showPop","dimmerValue","components","DeviceItem","DeviceDimmerSetting","DeviceCurtainSetting","DeviceAirConditionerSetting","DeviceAirPurifierSetting","onLoad","getApp","globalData","uni","$on","requestAccessibleSpaces","isLogin","console","log","onSocketOpen","token","getStorageSync","Date","now","sendSocketMessage","JSON","stringify","onSocketError","onSocketMessage","res","handleSocketMeesage","onSocketClose","code","connectSocket","onShow","onHide","closeSocket","computed","popDeviceImage","device","typeC","switchImage","isDeviceOn","deviceName","switchState","methods","loginButtonClick","navigateTo","url","bookingButtonClick","encodeURIComponent","tapCurrentRoom","event","detail","requestIoTTemplate","request","method","header","success","statusCode","handleAccessibleSpaces","logout","error","showToast","icon","title","duration","fail","complete","spaces","map","obj","SpaceModel","length","spaceId","space","text","roomName","value","showLoading","mask","handleTemplate","zones","hideLoading","zone","RoomZoneModel","filter","item","isSystemZone","parse","socketModel","SocketModel","forEach","deviceModel","devices","zoneDeviceId","controlModel","controls","control","zoneDeviceControlId","deviceItemClick","vibrateShort","socketObj","timestamp","deviceSettingClick","deviceDataModel","popUpClose","sliderValueChange"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=483fb224&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=483fb224&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport SpaceModel from './js/space-model.js'\nimport RoomZoneModel from './js/room-zone.js'\nimport SocketModel from './js/socket-model.js'\nimport DeviceItem from './components/device-item.vue'\nimport DeviceDimmerSetting from './components/device-dimmer-setting.vue'\nimport DeviceCurtainSetting from './components/device-curtain-setting.vue'\nimport DeviceAirConditionerSetting from './components/device-air-conditioner-setting.vue'\nimport DeviceAirPurifierSetting from './components/device-air-purifier-setting.vue'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 20,\n\t\t\tnavigationBarHeight: 64,\n\t\t\tbottomArea: 6,\n\t\t\tloginTip: '当前未登录',\n\t\t\tgridColumn: 2,\n\t\t\troomNameValues: [],\n\t\t\tcurrentRoomValue: null,\n\t\t\troomZones: [],\n\t\t\tisWebSocketOpen: false,\n\t\t\tisRequestSpacesDone: false,\n\t\t\tcurrentDeviceDataModel: null,\n\t\t\tshowPop: false,\n\t\t\tdimmerValue: 0,\n\t\t}\n\t},\n\tcomponents: {\n\t\tDeviceItem,\n\t\tDeviceDimmerSetting,\n\t\tDeviceCurtainSetting,\n\t\tDeviceAirConditionerSetting,\n\t\tDeviceAirPurifierSetting\n\t},\n\tonLoad() {\n\t\t// 计算\n\t\tthis.statusBarHeight = getApp().globalData.statusBarHeight\n\t\tthis.navigationBarHeight = getApp().globalData.navigationBarHeight\n\t\tthis.bottomArea = getApp().globalData.bottomArea > 0 ? getApp().globalData.bottomArea : 6\n\t\t// 接收全局登录事件\n\t\tuni.$on('haveLogin', () => {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t})\n\t\t// 获取房间\n\t\tif (this.isLogin) {\n\t\t\tconsole.log(this.isLogin);\n\t\t\tthis.requestAccessibleSpaces()\n\t\t}\n\t\t// websocket 回调\n\t\tuni.onSocketOpen(() => {\n\t\t\tthis.isWebSocketOpen = true\n\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t// 向服务器发送token\n\t\t\tlet data = {\n\t\t\t\t'data': {\n\t\t\t\t\ttoken: uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\t'timestamp': Date.now()\n\t\t\t}\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata: JSON.stringify(data)\n\t\t\t})\n\t\t})\n\t\tuni.onSocketError(function(){\n\t\t\tconsole.log('WebSocket连接打开失败！');\n\t\t})\n\t\tuni.onSocketMessage((res) => {\n\t\t\tthis.handleSocketMeesage(res.data)\n\t\t})\n\t\tuni.onSocketClose((res) => {\n\t\t\tthis.isWebSocketOpen = false\n\t\t  console.log('WebSocket 已关闭！', res);\n\t\t\tif (res.code === 1006) {\n\t\t\t\t// 自动断 重新连\n\t\t\t\tthis.connectSocket()\n\t\t\t}\n\t\t})\n\t},\n\tonShow() {\n\t\tif (this.isLogin && this.currentRoomValue) {\n\t\t\tthis.connectSocket()\n\t\t}\n\t},\n\tonHide() {\n\t\tuni.closeSocket()\n\t},\n\tcomputed: {\n\t\t...mapState(['isLogin']),\n\t\tpopDeviceImage() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\tconsole.log(this.currentDeviceDataModel);\n\t\t\t\tswitch (this.currentDeviceDataModel.device.typeC) {\n\t\t\t\t\tcase 'dimmingcontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editceilinglamp.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'curtaincontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editcurtain.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'airconditionercontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editairconditioner.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'airpurifiercontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editairquality.png'\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} \n\t\t\treturn ''\n\t\t},\n\t\tswitchImage() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.isDeviceOn ? '../../static/images/stey_ioticon_switch_on.png' : '../../static/images/stey_ioticon_switch_off.png'\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tdeviceName() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.device.deviceName\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tswitchState() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.isDeviceOn ? '已打开' : '已关闭'\n\t\t\t}\n\t\t\treturn ''\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations(['logout']),\n\t\tloginButtonClick() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'../login/login'\n\t\t\t})\n\t\t},\n\t\tbookingButtonClick() {\n\t\t\tconst url = encodeURIComponent('https://www.stey.com/zh-CN/booking/list')\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `../web/web-view?url=${url}`\n\t\t\t})\n\t\t},\n\t\ttapCurrentRoom(event) {\n\t\t\tthis.currentRoomValue = event.detail\n\t\t\tthis.requestIoTTemplate()\n\t\t},\n\t\trequestAccessibleSpaces() {\n\t\t\t// 请求spaces信息\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/app/iot/accessible-spaces',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\tthis.handleAccessibleSpaces(res.data.data)\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.isRequestSpacesDone = true\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thandleAccessibleSpaces(data) {\n\t\t\tconst spaces = data.map((obj) => new SpaceModel(obj))\n\t\t\tif (spaces.length > 0) {\n\t\t\t\tthis.currentRoomValue = spaces[0].spaceId\n\t\t\t\tthis.roomNameValues = spaces.map((space) => {\n\t\t\t\t\tconst obj = {text: space.roomName, value: space.spaceId}\n\t\t\t\t\treturn obj\n\t\t\t\t})\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t} else {\n\t\t\t\tthis.currentRoomValue = 138\n\t\t\t\tthis.roomNameValues = [\n\t\t\t\t\t{text: '520', value: 138},\n\t\t\t\t\t{text: '521', value: 142}\n\t\t\t\t]\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t}\n\t\t},\n\t\trequestIoTTemplate() {\n\t\t\tif (this.currentRoomValue) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `https://gateway.stey.com/iot-service/staff-app/iot/template/${this.currentRoomValue}`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.handleTemplate(res.data.data.zones)\n\t\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleTemplate(zones) {\n\t\t\t// 筛选非系统的zone\n\t\t\tconst roomZones = zones.map((zone) => new RoomZoneModel(zone)).filter((item) => !item.isSystemZone)\n\t\t\tthis.roomZones = roomZones\n\t\t\t//打开websocket\n\t\t\tthis.connectSocket()\n\t\t},\n\t\tconnectSocket() {\n\t\t\tif (this.isWebSocketOpen) {\n\t\t\t\tuni.closeSocket()\n\t\t\t}\n\t\t\tuni.connectSocket({\n\t\t\t\turl: `wss://gateway.stey.com/iot-service/app/iot/connect/${this.currentRoomValue}`,\n\t\t\t})\n\t\t},\n\t\thandleSocketMeesage(data) {\n\t\t\tconst obj = JSON.parse(data)\n\t\t\tconst socketModel = new SocketModel(obj)\n\t\t\tthis.roomZones.forEach((zone) => {\n\t\t\t\tconst deviceModel = zone.devices.filter((device) => device.zoneDeviceId === socketModel.zoneDeviceId)[0]\n\t\t\t\tif (deviceModel) {\n\t\t\t\t\tconst controlModel = deviceModel.controls.filter((control) => control.zoneDeviceControlId === socketModel.zoneDeviceControlId)[0]\n\t\t\t\t\tif (controlModel) {\n\t\t\t\t\t\tcontrolModel.value = socketModel.value\n\t\t\t\t\t\tconsole.log(socketModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeviceItemClick(obj) {\n\t\t\t// 震动\n\t\t\tuni.vibrateShort()\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '发送中',\n\t\t\t\tmask: true\n\t\t\t})\n\t\t\tlet socketObj = {\n\t\t\t\t'spaceId': this.currentRoomValue,\n\t\t\t\t...obj\n\t\t\t}\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/staff-app/iot/run-command',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tdata: socketObj,\n\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tconsole.log('token失效')\n\t\t\t\t\t\tthis.logout()\n\t\t\t\t\t\tthis.loginTip = '登录失效'\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeviceSettingClick(deviceDataModel) {\n\t\t\tthis.currentDeviceDataModel = deviceDataModel\n\t\t\tthis.showPop = true\n\t\t},\n\t\tpopUpClose() {\n\t\t\tthis.showPop = false\n\t\t},\n\t\tsliderValueChange(event) {\n\t\t\tthis.dimmerValue = event.detail.value\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590661534477\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
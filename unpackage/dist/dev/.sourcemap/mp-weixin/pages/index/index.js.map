{"version":3,"sources":["webpack:////Users/peng/Desktop/HX/SteyIoT/main.js","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?74d5","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4e3c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4d02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?8c02","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?e344","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?807c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?c6c3","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?342c","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?0bb2","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue?8439","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?bd46","webpack:////Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue?4aef"],"names":["createPage","Page","data","statusBarHeight","navigationBarHeight","bottomArea","loginTip","gridColumn","roomNameValues","currentRoomValue","roomZones","isWebSocketOpen","isRequestSpacesDone","currentDeviceDataModel","showPop","deviceType","isDimmer","isCurtain","isAirConditioner","isAirPurification","components","DeviceItem","DeviceDimmerSetting","DeviceCurtainSetting","DeviceAirConditionerSetting","DeviceAirPurifierSetting","onLoad","getApp","globalData","uni","$on","requestAccessibleSpaces","isLogin","gotoLoginPage","onSocketOpen","console","log","token","getStorageSync","Date","now","sendSocketMessage","JSON","stringify","onSocketError","onSocketMessage","res","handleSocketMeesage","onSocketClose","code","connectSocket","onShow","onHide","closeSocket","computed","popDeviceImage","device","typeC","showSwitchImage","switchImage","isDeviceOn","deviceName","switchState","methods","logout","redirectTo","url","tokenInvaild","showToast","icon","title","duration","showErrorMessage","error","showRequestFailed","bookingButtonClick","encodeURIComponent","navigateTo","changeAccountButtonClick","tapCurrentRoom","event","detail","requestIoTTemplate","request","method","header","success","statusCode","handleAccessibleSpaces","fail","complete","spaces","map","obj","SpaceModel","length","spaceId","space","text","roomName","value","showLoading","mask","handleTemplate","zones","hideLoading","zone","RoomZoneModel","filter","item","isSystemZone","parse","socketModel","SocketModel","forEach","deviceDataModel","deviceDataModels","zoneDeviceId","deviceModel","controlModel","controls","control","zoneDeviceControlId","setDevice","deviceSettingClick","switchButtonClick","controlId","deviceControlModel","version","socketObj","sendSocket","then","popUpClose","sendSocketObj","Promise","resolve","reject","vibrateShort","timestamp","tag","DeviceControlModel","sliderValue","isDrag","isWatchDataChange","props","watch","newValue","oldValue","mounted","sliderValueChange","sliderDragEnd","sliderDragStart","$emit"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=483fb224&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/peng/Desktop/HX/SteyIoT/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=483fb224&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport SpaceModel from './js/space-model.js'\nimport RoomZoneModel from './js/room-zone.js'\nimport SocketModel from './js/socket-model.js'\nimport DeviceItem from './components/device-item.vue'\nimport DeviceDimmerSetting from './components/device-dimmer-setting.vue'\nimport DeviceCurtainSetting from './components/device-curtain-setting.vue'\nimport DeviceAirConditionerSetting from './components/device-air-conditioner-setting.vue'\nimport DeviceAirPurifierSetting from './components/device-air-purifier-setting.vue'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 20,\n\t\t\tnavigationBarHeight: 64,\n\t\t\tbottomArea: 6,\n\t\t\tloginTip: '当前未登录',\n\t\t\tgridColumn: 2,\n\t\t\troomNameValues: [],\n\t\t\tcurrentRoomValue: null,\n\t\t\troomZones: [],\n\t\t\tisWebSocketOpen: false,\n\t\t\tisRequestSpacesDone: false,\n\t\t\tcurrentDeviceDataModel: null,\n\t\t\tshowPop: false,\n\t\t\tdeviceType: {\n\t\t\t\tisDimmer: false,\n\t\t\t\tisCurtain: false,\n\t\t\t\tisAirConditioner: false,\n\t\t\t\tisAirPurification: false\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\tDeviceItem,\n\t\tDeviceDimmerSetting,\n\t\tDeviceCurtainSetting,\n\t\tDeviceAirConditionerSetting,\n\t\tDeviceAirPurifierSetting\n\t},\n\tonLoad() {\n\t\t// 计算\n\t\tthis.statusBarHeight = getApp().globalData.statusBarHeight\n\t\tthis.navigationBarHeight = getApp().globalData.navigationBarHeight\n\t\tthis.bottomArea = getApp().globalData.bottomArea > 0 ? getApp().globalData.bottomArea : 6\n\t\t// 接收全局登录事件\n\t\tuni.$on('haveLogin', () => {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t})\n\t\t// 获取房间\n\t\tif (this.isLogin) {\n\t\t\tthis.requestAccessibleSpaces()\n\t\t} else {\n\t\t\tthis.gotoLoginPage()\n\t\t}\n\t\t// websocket 回调\n\t\tuni.onSocketOpen(() => {\n\t\t\tthis.isWebSocketOpen = true\n\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t// 向服务器发送token\n\t\t\tlet data = {\n\t\t\t\t'data': {\n\t\t\t\t\ttoken: uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\t'timestamp': Date.now()\n\t\t\t}\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata: JSON.stringify(data)\n\t\t\t})\n\t\t})\n\t\tuni.onSocketError(function(){\n\t\t\tconsole.log('WebSocket连接打开失败！');\n\t\t})\n\t\tuni.onSocketMessage((res) => {\n\t\t\tthis.handleSocketMeesage(res.data)\n\t\t})\n\t\tuni.onSocketClose((res) => {\n\t\t\tthis.isWebSocketOpen = false\n\t\t  console.log('WebSocket 已关闭！', res);\n\t\t\tif (res.code === 1006) {\n\t\t\t\t// 自动断 重新连\n\t\t\t\tthis.connectSocket()\n\t\t\t}\n\t\t})\n\t},\n\tonShow() {\n\t\tif (this.isLogin && this.currentRoomValue) {\n\t\t\tthis.connectSocket()\n\t\t}\n\t},\n\tonHide() {\n\t\tuni.closeSocket()\n\t},\n\tcomputed: {\n\t\t...mapState(['isLogin']),\n\t\tpopDeviceImage() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\tswitch (this.currentDeviceDataModel.device.typeC) {\n\t\t\t\t\tcase 'dimmingcontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editceilinglamp.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'curtaincontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editcurtain.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'airconditionercontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editairconditioner.png'\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'airpurifiercontrol':\n\t\t\t\t\treturn '../../static/images/stey_ioticon_editairquality.png'\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} \n\t\t\treturn ''\n\t\t},\n\t\tshowSwitchImage() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.device.typeC !== 'curtaincontrol'\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tswitchImage() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.isDeviceOn ? '../../static/images/stey_ioticon_switch_on.png' : '../../static/images/stey_ioticon_switch_off.png'\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tdeviceName() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.device.deviceName\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tswitchState() {\n\t\t\tif (this.currentDeviceDataModel) {\n\t\t\t\treturn this.currentDeviceDataModel.isDeviceOn ? '已打开' : '已关闭'\n\t\t\t}\n\t\t\treturn ''\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations(['logout']),\n\t\tgotoLoginPage() {\n\t\t\tconsole.log('toLogin');\n\t\t\tthis.logout()\n\t\t\tuni.redirectTo({\n\t\t\t\turl:'../login/login'\n\t\t\t})\n\t\t},\n\t\ttokenInvaild() {\n\t\t\tthis.gotoLoginPage()\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: '登录失效,重新登录',\n\t\t\t\tduration: 2000\n\t\t\t});\n\t\t},\n\t\tshowErrorMessage(error) {\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: error,\n\t\t\t\tduration: 2000\n\t\t\t});\n\t\t},\n\t\tshowRequestFailed() {\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: '网络请求失败',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t},\n\t\tbookingButtonClick() {\n\t\t\tconst url = encodeURIComponent('https://www.stey.com/zh-CN/booking/list')\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `../web/web-view?url=${url}`\n\t\t\t})\n\t\t},\n\t\tchangeAccountButtonClick() {\n\t\t\tthis.gotoLoginPage()\n\t\t},\n\t\ttapCurrentRoom(event) {\n\t\t\tthis.currentRoomValue = event.detail\n\t\t\tthis.requestIoTTemplate()\n\t\t},\n\t\trequestAccessibleSpaces() {\n\t\t\t// 请求spaces信息\n\t\t\tuni.request({\n\t\t\t\turl: 'https://gateway.stey.com/iot-service/app/iot/accessible-spaces',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\tthis.handleAccessibleSpaces(res.data.data)\n\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\tthis.tokenInvaild()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tthis.showErrorMessage()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tthis.showRequestFailed()\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.isRequestSpacesDone = true\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thandleAccessibleSpaces(data) {\n\t\t\tconst spaces = data.map((obj) => new SpaceModel(obj))\n\t\t\tif (spaces.length > 0) {\n\t\t\t\tthis.currentRoomValue = spaces[0].spaceId\n\t\t\t\tthis.roomNameValues = spaces.map((space) => {\n\t\t\t\t\tconst obj = {text: space.roomName, value: space.spaceId}\n\t\t\t\t\treturn obj\n\t\t\t\t})\n\t\t\t\tthis.requestIoTTemplate()\n\t\t\t}\n\t\t},\n\t\trequestIoTTemplate() {\n\t\t\tif (this.currentRoomValue) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:'',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `https://gateway.stey.com/iot-service/app/iot/template/${this.currentRoomValue}`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.handleTemplate(res.data.data.zones)\n\t\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\t\tthis.tokenInvaild()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\tthis.showErrorMessage()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tthis.showRequestFailed()\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleTemplate(zones) {\n\t\t\t// 筛选非系统的zone\n\t\t\tconst roomZones = zones.map((zone) => new RoomZoneModel(zone)).filter((item) => !item.isSystemZone)\n\t\t\tthis.roomZones = roomZones\n\t\t\t//打开websocket\n\t\t\tthis.connectSocket()\n\t\t},\n\t\tconnectSocket() {\n\t\t\tif (this.isWebSocketOpen) {\n\t\t\t\tuni.closeSocket()\n\t\t\t}\n\t\t\tuni.connectSocket({\n\t\t\t\turl: `wss://gateway.stey.com/iot-service/app/iot/connect/${this.currentRoomValue}`,\n\t\t\t})\n\t\t},\n\t\thandleSocketMeesage(data) {\n\t\t\tconst obj = JSON.parse(data)\n\t\t\tconst socketModel = new SocketModel(obj)\n\t\t\tthis.roomZones.forEach((zone) => {\n\t\t\t\tconst deviceDataModel = zone.deviceDataModels.filter((deviceDataModel) => deviceDataModel.device.zoneDeviceId === socketModel.zoneDeviceId)[0]\n\t\t\t\tif (deviceDataModel) {\n\t\t\t\t\tconst deviceModel = deviceDataModel.device\n\t\t\t\t\tconst controlModel = deviceModel.controls.filter((control) => control.zoneDeviceControlId === socketModel.zoneDeviceControlId)[0]\n\t\t\t\t\tif (controlModel) {\n\t\t\t\t\t\tcontrolModel.value = socketModel.value\n\t\t\t\t\t\tdeviceDataModel.setDevice(deviceModel)\n\t\t\t\t\t\tif (this.currentDeviceDataModel && this.currentDeviceDataModel.device.zoneDeviceId === deviceModel.zoneDeviceId) {\n\t\t\t\t\t\t\tthis.currentDeviceDataModel = deviceDataModel\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// console.log(socketModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeviceSettingClick(deviceDataModel) {\n\t\t\tthis.currentDeviceDataModel = deviceDataModel\n\t\t\tthis.deviceType.isDimmer = (deviceDataModel.device.typeC === 'dimmingcontrol')\n\t\t\tthis.deviceType.isCurtain = (deviceDataModel.device.typeC === 'curtaincontrol')\n\t\t\tthis.deviceType.isAirConditioner = (deviceDataModel.device.typeC === 'airconditionercontrol')\n\t\t\tthis.deviceType.isAirPurification = (deviceDataModel.device.typeC === 'airpurifiercontrol')\n\t\t\tthis.showPop = true\n\t\t},\n\t\tswitchButtonClick() {\n\t\t\tlet controlId = this.deviceControlModel(10).zoneDeviceControlId\n\t\t\tif (this.currentDeviceDataModel.device.typeC === 'airpurifiercontrol' && this.currentDeviceDataModel.device.version === 1) {\n\t\t\t\tcontrolId = this.deviceControlModel(40).zoneDeviceControlId\t\n\t\t\t}\n\t\t\tlet socketObj = {\n\t\t\t\t'spaceId': this.currentRoomValue,\n\t\t\t\t'value': this.currentDeviceDataModel.isDeviceOn ? 'false' : 'true',\n\t\t\t\t'zoneDeviceId': this.currentDeviceDataModel.device.zoneDeviceId,\n\t\t\t\t'zoneDeviceControlId': controlId,\n\t\t\t}\n\t\t\tthis.sendSocket(socketObj).then((res) => {\n\t\t\t\tthis.currentDeviceDataModel.isDeviceOn = !this.currentDeviceDataModel.isDeviceOn\n\t\t\t})\n\t\t},\n\t\tpopUpClose() {\n\t\t\tthis.showPop = false\n\t\t},\n\t\tsendSocketObj(obj) {\n\t\t\tlet socketObj = {\n\t\t\t\t'spaceId': this.currentRoomValue,\n\t\t\t\t...obj\n\t\t\t}\n\t\t\tthis.sendSocket(socketObj)\n\t\t},\n\t\tsendSocket(socketObj) {\n\t\t\tconsole.log(socketObj);\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// 震动\n\t\t\t\tuni.vibrateShort()\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '发送中',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tuni.request({\n\t\t\t\t\turl: 'https://gateway.stey.com/iot-service/app/iot/run-command',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdata: socketObj,\n\t\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`,\n\t\t\t\t\t\t'Accept-Language': 'zh'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t\t} else if (res.statusCode == 401) {\n\t\t\t\t\t\t\tthis.tokenInvaild()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst error = res.data.error\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\tthis.showErrorMessage()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tthis.showRequestFailed()\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tdeviceControlModel(tag) {\n\t\t\tconst controlModel = this.currentDeviceDataModel.device.controls.filter((control) => control.tag == tag)[0]\n\t\t\tif (controlModel) {\n\t\t\t\treturn controlModel\n\t\t\t}\n\t\t\treturn new DeviceControlModel()\n\t\t}\n\t}\n}\n","import { render, staticRenderFns, recyclableRender, components } from \"./device-dimmer-setting.vue?vue&type=template&id=191eeb11&\"\nvar renderjs\nimport script from \"./device-dimmer-setting.vue?vue&type=script&lang=js&\"\nexport * from \"./device-dimmer-setting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./device-dimmer-setting.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/peng/Desktop/HX/SteyIoT/pages/index/components/device-dimmer-setting.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./device-dimmer-setting.vue?vue&type=template&id=191eeb11&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./device-dimmer-setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./device-dimmer-setting.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DeviceModel from '../js/device-model.js'\nimport DeviceDataModel from '../js/device-data-model.js';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tsliderValue: 0,\n\t\t\tisDrag: false,\n\t\t\tisWatchDataChange: false\n\t\t}\n\t},\n\tprops: {\n\t\tdeviceDataModel: null\n\t},\n\twatch: {\n\t\tdeviceDataModel: function(newValue, oldValue) {\n\t\t\tthis.isWatchDataChange = true\n\t\t\tthis.sliderValue = newValue.sliderValue\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.deviceDataModel) {\n\t\t\tthis.sliderValue = this.deviceDataModel.sliderValue\n\t\t}\n\t},\n\tmethods: {\n\t\tsliderValueChange(event) {\n\t\t\tthis.sliderValue = event.detail\n\t\t\tif (!this.isDrag && !this.isWatchDataChange) {\n\t\t\t\tthis.sliderDragEnd()\n\t\t\t}\n\t\t},\n\t\tsliderDragStart() {\n\t\t\tthis.isDrag = true\n\t\t},\n\t\tsliderDragEnd() {\n\t\t\tthis.isDrag = false\n\t\t\tthis.isWatchDataChange = false\n\t\t\tif (!this.deviceDataModel.isDeviceOn) return\n\t\t\tlet controlId = this.deviceControlModel(20).zoneDeviceControlId\n\t\t\tconst obj = {\n\t\t\t\t'value': `${this.sliderValue}`,\n\t\t\t\t'zoneDeviceId': this.deviceDataModel.device.zoneDeviceId,\n\t\t\t\t'zoneDeviceControlId': controlId,\n\t\t\t}\n\t\t\tthis.$emit('sendsocketobj', obj)\n\t\t},\n\t\tdeviceControlModel(tag) {\n\t\t\tconst controlModel = this.deviceDataModel.device.controls.filter((control) => control.tag == tag)[0]\n\t\t\tif (controlModel) {\n\t\t\t\treturn controlModel\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./device-dimmer-setting.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./device-dimmer-setting.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1591864421502\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1591864469217\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}